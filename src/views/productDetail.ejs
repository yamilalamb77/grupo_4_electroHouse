<!DOCTYPE html>
<html lang="es">
<%- include('./partials/head.ejs')  %>
<body class="body-iteml">
    <!-- /* HEADER */ -->
    <%- include('./partials/header.ejs') %>
    <main class="productDetail-container">
        <section class="productDetail">
            <div class="images-container">
                <div class="thumbnailImages">
                    <% product.images.forEach(image => { %>
                        <img src="/images/productos/<%- image.image%>" alt="Imagen de producto" onclick="myFunction(this);">
                    <% }) %>
                </div>
                <div class="mainImage">
                    <img src="/images/productos/<%= product.images[0]?.image%>" alt="Imagen de producto" id="expandedImg">
                </div>
            </div>
            <div class="productData-container">
                <h3 class="productName"><%= product.name %> </h3>
                <div class="productDiscountd"><%- product.discount !== 0 ? `${product.discount}% OFF` : "" %></div>
                <div class="productPrice">$<%- toThousand(product.price - product.price * product.discount / 100)%></div>
                <div class="productNumber">
                    <label for="cantidad">Cantidad</label>
                    <div class="counter">
                        <button type="button" class="btn-subtract" onclick="subtract();">
                            -
                        </button>
                        <div id="count">1</div>
                                
                        <button type="button" id="btn-add" onclick="add();">
                            +
                        </button>
                    </div>
                   
                </div>
                
                <div class="button-addToCart">
                    <div class="btn-ad-btn-ad-primary">
                        <a href='/products/shoppingCart'> Agregar al carrito</a>
                       
                    </div>
                </div>
               
            </div>
        </section>
        <section class="productDescription">
            <div class="description">
                <h5>Descripci√≥n del producto</h5>
                <p><%= product.description %> </p>
            </div>
            <div class="comments">
                <h5>Opiniones</h5>
                <div class="comment">
                    <div class="stars">
                        <img src="/images/comment-stars.png" alt="">
                    </div>
                    <p class="opioniones">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Dolor sunt aliquid illo qui amet pariatur?</p>
                </div>
            </div>
        </section>
        <section class="special-offers">
            <h3 class="section__title"><%= titleSlider %></h3>
        
            <!-- Product Slider -->
        
            <div class="gallery productSlider js-flickity" data-flickity-options='{ "wrapAround": true }'>
              <% productSlider.forEach(product => { %>
                <div class="carousel-cell  productSlide">
                 <a href="../../products/detail/<%- product.id %>">
                    <div class="productDiscount"><%= product.discount %>% OFF</div>
                    <img src="/images/productos/<%- product.images[0].image %>" alt="">
                    <p class="productName"> 
                       <% if (product.name.length > 30) { %>
                           <%- `${product.name.slice(0,30)}...` %>
                       <% } else { %>
                           <%= product.name %>
                       <% } %></p>
                    <h4 class="productPrice">$<%- toThousand(product.price - product.price * product.discount / 100)%></h4>
                 </a>
                </div>
                <% }) %>
            </div>
        </section>
    </main>
    <!-- /* FOOTER */ -->
    <%- include('./partials/footer.ejs')%>
  
      
    <!-- JavaScript -->
    <script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>
    <script src="/js/productDetail.js"></script>
</body>
</html>